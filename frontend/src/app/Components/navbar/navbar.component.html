<div *ngIf="isUserLoggedIn" class="navbar-container">
  <button (click)="toggleNavbar()" class="navbar-toggle-button material-icons">
    menu
  </button>
  <div
    class="sidebar bg-gray-100 h-full p-4 fixed top-0 left-0 w-64 transition-transform duration-200 ease-in-out z-50"
    [class.translate-x-0]="isNavbarOpen"
    [class.-translate-x-full]="!isNavbarOpen"
  >
    <div class="profile flex items-center justify-between mb-6">
      <div class="flex items-center">
        <img
          [src]="userImg"
          alt="Profile"
          class="w-10 h-10 rounded-full mr-3"
        />
        <span class="font-semibold text-gray-800">{{ user?.username }}</span>
      </div>
      <button (click)="toggleNavbar()" class="material-icons">close</button>
    </div>
    <button
      (click)="openAddIdentityModal()"
      class="add-task-button flex items-center bg-red-500 text-white p-2 rounded mb-6 hover:bg-red-600"
    >
      <span class="material-icons">add</span>
      <span class="ml-2">Aggiungi Identità</span>
    </button>
    <ul class="menu">
      <li class="menu-item mb-3">
        <a
          routerLink="/dashboard"
          class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
        >
          <span class="material-icons">inbox</span>
          <span class="ml-3">Dashboard</span>
        </a>
      </li>
      <li class="menu-item mb-3">
        <a
          routerLink="/account"
          class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
        >
          <span class="material-icons">today</span>
          <span class="ml-3">Account</span>
        </a>
      </li>
      <li class="menu-item mb-3">
        <a
          href="#"
          class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
        >
          <span class="material-icons">calendar_today</span>
          <span class="ml-3">Prossime</span>
        </a>
      </li>
      <li class="menu-item mb-3">
        <a
          href="#"
          class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
        >
          <span class="material-icons">label</span>
          <span class="ml-3">Filtri ed etichette</span>
        </a>
      </li>
    </ul>
    <div class="projects mt-6">
      <h3 class="font-semibold text-gray-600 mb-2">I miei progetti</h3>
      <ul>
        <li class="project-item mb-3">
          <a
            href="#"
            class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
          >
            <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
            <span>Casa</span>
            <span class="ml-auto text-sm text-gray-500">5</span>
          </a>
        </li>
        <li class="project-item mb-3">
          <a
            href="#"
            class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
          >
            <span class="w-3 h-3 bg-red-500 rounded-full mr-3"></span>
            <span>Lavoro</span>
            <span class="ml-auto text-sm text-gray-500">6</span>
          </a>
        </li>
        <li class="project-item mb-3">
          <a
            href="#"
            class="flex items-center text-gray-700 hover:bg-gray-200 p-2 rounded"
          >
            <span class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></span>
            <span>Istruzione</span>
            <span class="ml-auto text-sm text-gray-500">4</span>
          </a>
        </li>
      </ul>
    </div>
    <button
      (click)="logout()"
      class="logout-button flex items-center bg-red-500 text-white p-2 rounded mt-6 hover:bg-red-600"
    >
      <span class="material-icons">logout</span>
      <span class="ml-2">Logout</span>
    </button>
  </div>
</div>

<!-- Modale per aggiungere identità -->
<div
  *ngIf="isAddIdentityModalOpen"
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
>
  <div class="bg-white p-8 rounded shadow-lg w-full max-w-lg">
    <h2 class="text-2xl font-bold mb-4">Aggiungi Identità</h2>
    <form [formGroup]="addIdentityForm" (ngSubmit)="onSubmit()">
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700"
          >Nome Identità</label
        >
        <input
          type="text"
          formControlName="title"
          class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm"
          required
        />
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700"
          >Descrizione</label
        >
        <textarea
          formControlName="description"
          class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm"
          required
        ></textarea>
      </div>
      <div class="flex justify-end">
        <button
          type="button"
          class="mr-4 py-2 px-4 border border-gray-300 rounded-md shadow-sm"
          (click)="closeAddIdentityModal()"
        >
          Annulla
        </button>
        <button
          type="submit"
          class="py-2 px-4 bg-blue-500 text-white rounded-md shadow-sm"
        >
          Salva
        </button>
      </div>
    </form>
  </div>
</div>
